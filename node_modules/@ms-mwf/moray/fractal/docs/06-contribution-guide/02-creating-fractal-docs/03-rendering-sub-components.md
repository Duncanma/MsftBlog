One of the great features of Fractal is the ability to reference a component within another component without re-writing code. This encourages code reuse and consistency. The below documentation will describe recommended approaches for rendering sub-components in Fractal.

>For further reading, see [Incuding sub-components](https://fractal.build/guide/components/including-sub-components.html) in the official Fractal documentation.

For the purposes of this demo, we have created two sample components called "Banner" and "Call to Action". Within Banner we have namespaced context for "heading" and "link". This is recommended best practice as it prevents object key collisions and allows for each context to have additional properties added to it in the future without issue.

banner.config.json

```json
{
  "title": "Banner",
  "context": {
    "heading": {
      "text": "Hello World!"
    },
    "link": {
      "text": "Read more",
      "href": "/some/url"
    }
  }
}
```

banner.hbs

```hbs
<div>
  <h1>\{{heading.text}}</h1>
  <a href="\{{link.href}}">\{{link.text}}</a>
</div>
```

call-to-action.config.json

```json
{
  "title": "Call to Action",
  "context": {
    "text": "Read more",
    "href": "#"
  }
}
```

call-to-action.hbs

```hbs
<a href="\{{href}}">\{{text}}</a>
```

Instead of re-creating the same markup for the link inside Banner, we want to use the Call to Action instead. There are several ways to render sub-components. Below we will show each method using the above demo components.

**Typically, the render helper with `merge=true` is the preferred method as it promotes context inheritance while allowing for inherited context to to be overidden with the current context when needed. See [method 6](#6-render-helper-with-merged-context) for more information.**

## 1. Handlebars partial

banner.hbs

```hbs
<div>
  <h1>\{{heading.text}}</h1>
  \{{> '@call-to-action' }}
</div>
```

This method does not pass context, nor does it use the default context defined in `call-to-action.config.json`. For it to recieve context, it's context must be defined in the current component's local scope (essentially `this`).

Unless you are working within the same object scope, this method won't work in most cases for rendering sub-components. This is because sub-component context should be nested inside a namespace within the current component's scope. In Banner we have the Call to Action's context contained within the `link` object. The only way to make this work would to be to flatten our Banner's configuration object, which would be counterintuitive to using JSON for configuration.

## 2. Handlebars partial with context

banner.hbs

```hbs
<div>
  <h1>\{{heading.text}}</h1>
  \{{> '@call-to-action' link }}
</div>
```

This method passes the context nested under the current object's `link` property. Whenever using a handlebars partial, you must pass a ***complete*** context for the Call to Action to render properly. For example, if the Banner context omitted the `href` property under `link`, the rendered Call to Action anchor element would have a blank `href` property. This method is typically not recommended since it provides no real advantage over other methods.

## 3. Handlebars partial with context properties

banner.hbs

```hbs
<div>
  <h1>\{{heading.text}}</h1>
  \{{> '@call-to-action' text=link.text href=link.href }}
</div>
```

This method behaves in the same way as the previous mentioned method, but rather than pass a context object reference, it passes each context property individually. Although not useful in most cases (not to mention overly verbose) it is useful when you need to override the context from the template. A good example of this in practice would be generating dynamic values from a for-loop in your template.

## 4. Render helper

banner.hbs

```hbs
<div>
  <h1>\{{heading.text}}</h1>
  \{{ render '@call-to-action' }}
</div>
```

This method renders the sub-component without passing any context. Without context passed, the render helper will use the sub-component's original context only. In this case, only the context in `call-to-action.config.json` is used. This is only useful if you want to render a sub-component without overriding any of its context.

## 5. Render helper with context

banner.hbs

```hbs
<div>
  <h1>\{{heading.text}}</h1>
  \{{ render '@call-to-action' link }}
</div>
```

This method produces the same result as method 2&mdash;using a handlebars partial with context. Although the render helper supports context inheritance while the partial does not, simply passing in a context reference will completely override the original context of the sub-component. This may be helpful when your sub-component renders content from an array of context objects and you *do not* wish to inherit the contents of the array defined in the original context.

## 6. Render helper with merged context

banner.hbs

```hbs
<div>
  <h1>\{{heading.text}}</h1>
  \{{ render '@call-to-action' link merge=true }}
</div>
```

This is the recommended method for including most sub-components. The render helper merges the passed context object with the inherited context object of the original component. Using this method you can use inheritance to your advantage to reduce repetitive code as well as override or add to context when nessecary. If the default context of the sub-component is robust, only the context unique to the current component will need to be defined and passed.