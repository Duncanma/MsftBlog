A Sticky is a behavioral component that allows an element to stick to either the top or bottom of the viewport. It is similar to `position: sticky` in CSS but allows for Sticky elements to show/hide content when stuck.

> **Note:** Sticky content should not occupy more than 33% of the height of the viewport. Sticky content covering too much of the viewport is an accessibility problem. Also, beware of conflicts with other sticky content on the page (e.g. chat, "back to top" elements).

## Behavior

### Hiding and showing content when "stuck"

Although Sticky is primarily a functional component, there are two optional CSS classes available to show/hide content _when in the "stuck" state_. If used, they must be placed on a child element within the Sticky container.

| Class               | Description                                          |
| ------------------- | ---------------------------------------------------- |
| `sticky-show-stuck` | Element will be **shown** when the sticky is stuck.  |
| `sticky-hide-stuck` | Element will be **hidden** when the sticky is stuck. |

**Example:**

```html
<div data-mount="sticky">
  <p class="sticky-show-stuck">I show when stuck.</p>
  <p class="sticky-hide-stuck">I hide when stuck.</p>
</div>
```

### Sticky sentinel

The Sticky component injects and observes an empty `<div>` with the class `sticky-sentinel` to check the scroll position. In contexts where there may be horizontal scrolling, it is important to make sure that this element cannot be scrolled out of the viewport to the left or right so that the Intersection Observer still detects the vertical intersections.

## JavaScript Usage

### Initialization

Adding `data-mount="sticky"` to the Sticky container element will auto-initialize the Sticky on page load.

```html
<div data-mount="sticky">{sticky-content}</div>
```

The following HTML `data-` attributes can be used to configure the Sticky component:

| Attribute                | Value             | Instance member          | Required | Description                                                                                      |
| ------------------------ | ----------------- | ------------------------ | -------- | ------------------------------------------------------------------------------------------------ |
| `data-mount`             | `"sticky"`        | `el`                     | yes\*    | Initializes a `Sticky` JavaScript instance.                                                      |
| `data-direction`         | `top` \| `bottom` | `direction`              | no       | Viewport side to which the element should stick. Defaults to 'top'.                              |
| `data-smooth-transition` | `true` \| `false` | `enableSmoothTransition` | no       | Enables smoother transitions for Sticky content when switching between stuck and unstuck states. |

\* **Attribute is required if using the auto-initialization method only! `data-` attributes are not recommended to be used otherwise and may result in unexpected behavior.**

To initialize a Sticky via JavaScript, create a new instance by passing in the reference of the element using the `el` option.

```js
sticky = new mwf.Sticky({
  el: document.querySelector('stickyElement')
});
```

### Options

| Name                     | Type      | Required | Default | Description                                                                                                 |
| ------------------------ | --------- | -------- | ------- | ----------------------------------------------------------------------------------------------------------- |
| `el`                     | `Node`    | yes      | `null`  | The sticky element.                                                                                         |
| `direction`              | `String`  | no       | `"top"` | Whether the element sticks from the top or the bottom.                                                      |
| `enableObserver`         | `Boolean` | no       | `true`  | Enables the intersection observer.                                                                          |
| `enableSmoothTransition` | `Boolean` | no       | `false` | Enables smoother transitions for content within the sticky when switching between stuck and unstuck states. |
| `extraScrollPaddingPx`   | `Number`  | no       | `12`    | Extra scroll padding on document element (in px) to reduce crowding into sticky bars                        |

### Events

| Event name | Event target    | Description                             |
| ---------- | --------------- | --------------------------------------- |
| `onStatic` | _instance_.`el` | Dispatches when element becomes static. |
| `onSticky` | _instance_.`el` | Dispatches when element becomes sticky. |
| `onRemove` | _instance_.`el` | Dispatches when element is removed.     |
| `onUpdate` | _instance_.`el` | Dispatches when element is updated.     |

### Instance methods

#### doesSentinelExceedBoundary()

Check if the sentinel rectangle meets the boundary requirements. Returns `true` or `false`.

## setObserverStatus(status)

Sets whether the observer is enabled and adds/removes the `stuck` CSS class accordingly.

| Parameter | Type      | Default     | Description                                                 |
| --------- | --------- | ----------- | ----------------------------------------------------------- |
| `status`  | `Boolean` | `undefined` | Whether the observer should be enabled (`true` or `false`). |

#### update(opts)

Updates the instance with respect to its `direction`, `enableSmoothTransition`, and/or `extraScrollPaddingPx` and fires the `onUpdate` event. Any information in the `data-` attributes will be ignored when called. The options that can be passed in are the following:

| Name                          | Type      | Required | Default | Description                                                                                                 |
| ----------------------------- | --------- | -------- | ------- | ----------------------------------------------------------------------------------------------------------- |
| `opts.direction`              | `String`  | no       | "top"   | Whether the element sticks from the top or the bottom.                                                      |
| `opts.enableSmoothTransition` | `Boolean` | no       | `false` | Enables smoother transitions for content within the sticky when switching between stuck and unstuck states. |
| `opts.extraScrollPaddingPx`   | `Number`  | no       | `12`    | Extra scroll padding on document element (in px) to reduce crowding into sticky bars                        |

If other members such as `instance.el` need to be updated, the instance should be destroyed via `remove()` and a new instance created using `new Sticky(opts)`

#### remove()

Removes the Sticky instance along with its sentinel element, `stuck` CSS class, custom events, and observers. Dispatches an `onRemove` event.

### Static methods

#### getInstances()

Returns an array of Sticky instances.

| Returns | Description                  |
| ------- | ---------------------------- |
| `Array` | An array of Sticky instances |
