{{setVar 'id' (evaluate id '||' (uid))}}
{{#if collapse-controls}}
<div class="btn-group align-items-center mb-g" role="group" data-mount="collapse-controls" data-target="#{{getVar 'id'}}">
    {{> '@button' id="" style="link" text="Expand all" attributes=(object type="button" data-action="expand" aria-pressed="false" aria-disabled="false")}}
    <span aria-hidden="true"> | </span>
    {{> '@button' id="" style="link" text="Collapse all" attributes=(object type="button" data-action="collapse" aria-pressed="false" aria-disabled="false")}}
</div>
{{/if}}

<ul class="accordion{{#if backplate}} accordion-backplate{{/if}} {{classes}}" id="{{getVar 'id'}}">
  {{#each collapses}}
    {{#if button-wrapper.classes~}}
      {{#unless (contains button-wrapper.classes 'accordion-header')~}}
        {{setProp button-wrapper 'classes' (math button-wrapper.classes '+' ' accordion-header')~}}
      {{/unless~}}
    {{else~}}
      {{setProp button-wrapper 'classes' 'accordion-header'~}}
    {{/if~}}
    {{#if classes~}}
      {{#unless (contains classes 'accordion-body')~}}
        {{setProp this 'classes' (math classes '+' ' accordion-body')~}}
      {{/unless}}
    {{else~}}
      {{setProp this 'classes' 'accordion-body'~}}
    {{/if~}}
    {{~setProp this 'attributes' (evaluate attributes '||' (object))~}}
    {{#if ../group-management}}
      {{#unless collapse-controls}}
        {{~setProp attributes 'data-parent' (math '#' '+' ../id)~}}
      {{/unless}}
    {{/if}}
    <li>{{render '@collapse' this merge=true}}</li>
  {{/each}}
</ul>
