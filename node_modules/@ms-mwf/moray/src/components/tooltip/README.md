## **Deprecation notice**

As of WCAG 2.1, the guidance around tooltip implementation and support is incomplete. The current state of browser and Assistive Technology does not support accessible tooltip components, particularly for mobile users. **The current Microsoft accessibility guidance does _not_ allow for the usage of MWF Tooltips at this time.** Instead, use the native browser [title](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/title) attribute to provide users with additional, but not essential information. For essential information, see [Popover]({{ internalLink '/components/detail/popover' }}) or [Modal]({{ internalLink '/components/detail/modal' }}).

## Accessibility requirements

Content should remain below a few words for accessibility. If content is longer, it is recommended to use a different component such as a [Popover]({{ internalLink '/components/detail/popover' }}) or [Modal]({{ internalLink '/components/detail/modal' }}).

The trigger for a Tooltip must be marked up as a `<button>` or `<a>` (anchor) element, with the latter requiring a `role="button"`.

### Disabled elements

Tooltips should not be triggered by disabled elements, nor should the disabled element appear to trigger a Tooltip by other means. In such situations, it is recommended to place another visually distinguishable button or trigger next to the disabled element you wish to use a Tooltip dialog with. For example, an "info" icon that triggers a Tooltip next to a disabled button.

## Tooltip trigger

```html
<button data-mount="tooltip" data-placement="top" title="Placeholder content for the tooltip" data-sr-close="Press escape to close tooltip">
  Tooltip trigger
</button>
```

### Required properties
| Property          | Value                               | Description |
|-------------------|-------------------------------------|-------------|
| data-sr-close     | Plain text string                   | Used to localize the instructional screen reader text of the dialog. Only required for multi-language or non-English sites. Defaults to "Press escape to close tooltip". |
| data-mount        | `tooltip`                           | Enables auto-initialization for JavaScript. |
| title             | Plain text string                   | The content to insert into the dialog. |

### Optional properties
| Property            | Value                       | Description |
|---------------------|-----------------------------|-------------|
| data-alignment      | `start`, `end`, or `center` | Sets the alignment of the dialog to the trigger. For `left` and `right` placement, this is the vertical alignment; for `top` and `bottom` placement, the horizontal alignment. Defaults to `center`. |
| data-disable-reflow | Boolean                     | Adding this attribute will disable the responsive reflow behavior of the tooltip and force it to open in a fixed position. |
| data-placement      | `top`, `right`, `bottom`, `left`, `start`, or `end` | Sets preferred placement in relation to the trigger. `Left` and `right` are LTR biased and will invert in RTL mode. Use `start` and `end` in place of `right` and `left` if markup is specific to an RTL-first site to improve code clarity. Defaults to `right` in LTR, `left` in RTL. |

## JavaScript Usage

Adding `data-mount="tooltip"` to the Tooltip's triggering element will auto-initialize the Tooltip on page load.

### Initialization

To initialize a Tooltip via JavaScript, create a new instance by passing in the reference of the Tooltip's triggering element using the `el` option.

```js
myTooltip = new mwf.Tooltip({
  el: document.querySelector('#tooltipId')
});
```

### Options

| Name          | Type              | Required  | Default   | Description |
|---------------|-------------------|-----------|-----------|-------------|
| el            | Node              | yes       | null      | The element that the Tooltip describes. |
| menu          | Node              | no        | null      | The element that represents the Tooltip flyout. |
| placement     | string enum       | no        | 'right' for LTR, 'left' for RTL | Sets preferred placement in relation to the trigger. Accepts `left`, `right`, `top`, `bottom`, `start`, and `end`.|
| alignment     | string enum       | no        | 'center'  | Sets preferred alignment of the dialog to the trigger. |
| offset        | string or number  | no        | 16        | Sets the offset in pixels of the dialog from the trigger. |
| enableReflow  | boolean           | no        | true      | Enables the dialog to re-position itself according to available space in the window. |
| enableFade    | boolean           | no        | true      | Enables a fade in/out animation on the dialog. |

> For placement, `left` and `right` options are LTR biased and will invert in RTL mode. Use `start` and `end` in place of `right` and `left` if code is specific to an RTL-first site to improve code clarity. Defaults to `right` in LTR, `left` in RTL.

### Events

| Event name | Event target    | Description |
|------------|-----------------|-------------|
| onHide     | instance.el     | Dispatches when the dialog becomes hidden. |
| onRemove   | instance.el     | Dispatches when the Tooltip instance is removed. |
| onShow     | instance.el     | Dispatches when the dialog becomes shown.  |
| onUpdate   | instance.el     | Dispatches when the Tooltip instance is updated. |

### Static Methods

#### getInstances()

Returns a list of all Tooltip instances.

| Returns | Description |
|---------|-------------|
| array   | An array of all current instantiated Tooltips. |

### Getters

#### currentPosition

Returns the current calculated reflow position of the dialog (if `enableReflow` is not `false`) or the original placement and alignment.

| Returns  | Description |
|----------|-------------|
| Object   | An object containing the current calculated placement and an alignment values |

### Instance Methods

#### calcReflowPosition()

Calculates the most appropriate position for the dialog according to the available space in the window and the original placement and alignment options supplied. This method saves the recorded reflow position object to the instance property `reflowPosition` for later use.

#### hide()

Hides the Tooltip dialog.

#### positionMenu()

Positions the Popover dialog according to the placement and alignment options. If `enableReflow` is `true`, the position will call `calcReflowPosition` to find the most suitable position according to the available space within the window and the original placement and alignment provided.

#### remove()

Removes all event listeners, observers, and references to the Tooltip instance.

#### show()

Shows the Tooltip dialog.

#### toggle()

Toggles the state of the dialog between shown or hidden.

#### update()

Updates the Tooltip's configuration and if shown, re-positions the dialog.

| Params                 | Type             | Default | Description |
|------------------------|------------------|---------|-------------|
| Options                | Object           | {}      | An object containing configuration options for the Tooltip. |
| Options.placement      | string enum      | null    | The new placement for the dialog. |
| Options.alignment      | string enum      | null    | The new alignment for the dialog. |
| Options.offset         | string or number | null    | The new dialog offset in pixels. |
| Options.enableReflow   | boolean          | null    | Whether the dialog should auto-adjust positioning based on window real estate. |
| Options.enableFade     | boolean          | null    | Whether the dialog should animate in and out with a fade effect. |
