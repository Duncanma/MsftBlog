Dropdown is comprised of a parent element, toggle, and menu. It appears as a button on page load. Clicking on the button toggles a menu with a list of items. The direction of the menu can be controlled through classes added in HTML or with JavaScript options.

## Responsiveness

Dropdown calculates its position (alignment and placement) based on window size. This functionality can be disabled by setting `enableReflow` option on the JavaScript Instance to `false` or adding HTML attribute `data-disable-reflow,` when using auto-initialization, to the toggling element.

## Style

Dropdowns should be a `<div>` element that contains a [Toggle](#toggle) and [Menu](#menu).

```html
<div class="dropdown ">
    <!-- Toggle -->
    <button class="btn btn-faint-secondary dropdown-toggle">Dropdown</button>

    <!-- Menu -->
    <ul class="dropdown-menu">
        <li>
            <a class="dropdown-item" href="#">Action</a>
        </li>
        <li>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="#">Another action</a>
        </li>
        <li>
            <a class="dropdown-item" href="#">Something else here</a>
        </li>
    </ul>
</div>
```

A standard Dropdown must contain only one of the following classes:

| Class       | Description |
|-------------|-------------|
| `dropdown`  | Applies characteristic Dropdown styling; Menu will appear below the toggle |
| `dropleft`  | Applies characteristic Dropdown styling; Menu will appear to the left of the toggle |
| `dropup`    | Applies characteristic Dropdown styling; Menu will appear above the toggle |
| `dropright` | Applies characteristic Dropdown styling; Menu will appear to the right of the toggle |

In addition to one of the above classes, a Split Dropdown must contain a `btn-group` class, and a second `<button>` element.

```html
<div class="dropdown btn-group ">
    <!-- Secondary button -->
    <button class="btn btn-faint-secondary">Split dropdown</button>

    <!-- Toggle -->
    <button class="btn btn-faint-secondary dropdown-toggle-split btn-group-divider-prepend dropdown-toggle">
        <span class="sr-only">Toggle Dropdown for Dropdown</span>
    </button>

    <!-- Menu -->
    <ul class="dropdown-menu">
        <li>
            <a class="dropdown-item" href="#">Action</a>
        </li>
        <li>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="#">Another action</a>
        </li>
        <li>
            <a class="dropdown-item" href="#">Something else here</a>
        </li>
    </ul>
</div>
```

### Toggle

The toggle for a Dropdown is a clickable element that opens and closes the menu, a `<button>` in most cases (see [Behavior](#behavior))

| Class             | Required | Description |
|-------------------|----------|-------------|
| `dropdown-toggle` | yes      | Applies styling to the toggle |

In addition to the above class, the following classes must be included on the Toggle for Split Dropdowns

| Class                       | Required | Description |
|-----------------------------|----------|-------------|
| `dropdown-toggle-split`     | yes      | Applies styling to the toggle |

### Menu

Menu wraps menu items and menu divider.

| Class              | Required    | Description |
|--------------------|-------------|-------------|
| `dropdown-menu`    | yes         | Applies styling to the menu. |

### Modifier classes

| Element                 | Class                       | Description |
|-------------------------|-----------------------------|-------------|
| Menu                    | `dropdown-menu-lg`          | Applies a larger minimum width to the menu |
| Toggle                  | `btn-group-divider-prepend` | Applies divider between toggle and secondary button |
| Toggle/Secondary button | `btn-faint-secondary`       | Applies background color to buttons |

### Menu item

Menu items are only found in menus that are considered lists (`<ul>` or `<ol>`) of links. Each link is considered a menu item.

| Class           | Required | Description |
|-----------------|----------|-------------|
| `dropdown-item` | yes      | Applies styling to a menu item |

### Menu divider

Dividers are decorative elements meant to visually separate content within a Dropdown.

| Class              | Required | Description |
|--------------------|----------|-------------|
| `dropdown-divider` | yes      | Applies styling to the divider |

## Behavior

### Toggle

The toggle for a Dropdown must be a `<button>` element *unless* the toggle is part of a list of navigation links. In this case the toggle should be an `<a>` (anchor) element. JavaScript for the Dropdown will favor the toggle functionality and thus prevent default behavior for link elements.

| Property              | Value                       | Required | Description |
|-----------------------|-----------------------------|----------|-------------|
| `id`                  | a unique identifier         | yes      | Value for menu's `aria-labelledby` prop |
| `type`                | `button`                    | yes      | Sets the default behavior of the button  |
| `data-mount`          | `dropdown`                  | yes      | Enables auto-initialization for JavaScript |
| `aria-controls`       | `id` of menu element        | yes      | Identifies menu element for Assistive Technology |
| `aria-expanded`       | `false` if the menu is hidden, `true` if the menu is shown | yes         | Tracks menu state for Assistive Technology |
| `data-alignment`      | `start,` `end,` or `center` | no       | This sets the alignment of the menu to the trigger. For `left` and `right` placement, this is the vertical alignment; for `top` and `bottom` placement, the horizontal alignment. Defaults to `center`. |
| `data-disable-reflow` | Boolean                     | no       | Adding this attribute will disable the responsive reflow behavior of the flyout menu and force it to open in a fixed position. |
| `data-placement`      | `top,` `right,` `bottom,` `left,` `start,` or `end` | no          | Sets preferred placement in relation to the trigger _ only works if no directional `dropdown` class is added to the parent. `Left` and `right` are LTR biased and will invert in RTL mode. Use `start` and `end` in place of `right` and `left` if markup is specific to an RTL-first site to improve code clarity. Defaults to `right` in LTR, `left` in RTL. |

### Menu

Menu element is responsible for calculating Menu position.

| Property          | Value                  | Required | Description |
|-------------------|------------------------|----------|-------------|
| `id`              | a unique identifier    | yes      | Value for toggle's `aria-controls` prop |
| `aria-labelledby` | `id` of toggle element | yes      | Required for Assistive Technology |

## JavaScript usage

### Initialization

Adding `data-mount="dropdown"` to the Dropdown's toggling element will auto-initialize the Dropdown on page load. See [example](#example) above.

To initialize a Dropdown via JavaScript, create a new instance by passing in the reference of the Dropdown's toggling element using the `el` option.

```js
myDropdown = new mwf.Dropdown({
  el: document.querySelector('#dropdownId')
});
```

### Events

| Event name | Event target    | Description |
|------------|-----------------|-------------|
| onHide     | _instance_.`el` | Dispatches when a menu becomes hidden |
| onRemove   | _instance_.`el` | Dispatches when a Dropdown is removed |
| onShow     | _instance_.`el` | Dispatches when a menu becomes shown  |
| onUpdate   | _instance_.`el` | Dispatches when a Dropdown is updated |

### Static methods

#### getInstances()

Returns a list of all Dropdown instances.

| Returns | Description |
|---------|-------------|
| `array` | An array of all current instantiated Dropdowns |

### Instance methods

#### calcReflowPosition()

Calculates the most appropriate position for the menu according to the available space in the window and the original placement and alignment options supplied. This method saves the recorded reflow position object to the instance property `reflowPosition` for later use.

#### hide()

Hides the Dropdown menu.

| Params           | Type      | Default | Description |
|----------------- |-----------|---------|-------------|
| `opts`           | `Object`  | `{}`    | An object containing options for hiding the Dropdown |
| `opts.setFocus`  | `boolean` | `true`    | Whether or not the focus should be set to the toggling element after hiding the menu |

#### positionMenu()

Positions the Dropdown menu according to the placement and alignment options. If `enableReflow` is `true`, the position will call `calcReflowPosition` to find the most suitable position according to the available space within the window and the original placement and alignment provided.

#### remove()

Removes all event listeners, observers, and references to the Dropdown instance.

#### show()

Shows the Dropdown menu.

#### toggle()

Toggles the state of the menu between shown or hidden.

#### update()

Updates the Dropdown's configuration and re-positions the menu.

| Params                | Type                | Default   | Description |
|-----------------------|---------------------|-----------|-------------|
| `opts`                | `Object`            | `{}`      | An object containing configuration options for the Dropdown |
| `opts.placement`      | `String` literal    | `null`    | The new placement for the menu (accepts `up,` `down,` `left,` or `right`) |
| `opts.alignment`      | `String` literal    | `null`    | The new alignment for the menu (accepts `start,` `end,` or `center`) |
| `opts.offset`         | `string` or `number`| `null`    | The new menu offset in pixels |
| `opts.enableReflow`   | `boolean`           | `null`    | Whether the menu should auto-adjust positioning based on window real estate |

The option(s) need to be passed in as a config object like so:

```js
myDropdown.update({
  placement: 'up',
  alignment: 'start'
});
```

### Instance properties

These are the properties accessible on an instance of Dropdown:

| Name              | Type        | Description                                   |
|-------------------|-------------|-----------------------------------------------|
| `alignment`       | `String`    | Which edge of the dialog and trigger to align |
| `boundingRect`    | `Object`    | An Object containing `DOMRect` objects defining the bounding rectangles for the trigger (`el`), dialog (`menu`), and the trigger's parent element (`parent`) |
| `el`              | `Node`      | The triggering button element                 |
| `enableFade`      | `Boolean`   | Whether transitions animations should be done when hiding and showing the Dropdown dialog |
| `enableReflow`    | `Boolean`   | Whether to fall back to alternate positioning of the dialog when the viewport is too small |
| `events`          | `Array`     | A list of the event listeners added by this instance |
| `menu`            | `Node`      | The Dropdown dialog                            |
| `offset`          | `Number`    | The space to leave between the dialog and the trigger when positioning the dialog, in pixels |
| `overflowOffset`  | `Number`    | The number of pixels the menu must be offset to prevent horizontal scrolling of the window for menus positioned `top` or `bottom` |
| `parent`          | `Node`      | The parent element of the triggering button   |
| `placement`       | `String`    | Which side of the triggering button to place the Dropdown dialog on |
| `reflowPosition`  | `Object`    | An Object storing the most recent result of a reflow calculation, a `placement` and `alignment` |
| `shown`           | `Boolean`   | Whether the Dropdown dialog is currently shown |
| `translateX`      | `Number`    | The calculated `x` value of the inline CSS style `transform: translate(x, y);` used to visually place the menu |
| `translateY`      | `Number`    | The calculated `y` value of the inline CSS style `transform: translate(x, y);` used to visually place the menu |
