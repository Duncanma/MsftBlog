{{setVar 'id' (evaluate id '||' (uid))~}}

<{{button-wrapper.html-tag}} class="{{button-wrapper.classes}}" {{{htmlAttr button-wrapper.attributes}}}>
{{setProp button 'attributes' (evaluate button.attributes '||' (object))~}}
{{setProp button.attributes 'data-mount' 'collapse'~}}
{{setProp button.attributes 'data-target' (math '#' '+' (getVar 'id'))~}}
{{#if auto-expand}} {{setProp button.attributes 'aria-expanded' 'true'~}}
{{else}}{{setProp button.attributes 'aria-expanded' 'false'~}}
{{/if~}}
{{setProp button.attributes 'aria-controls' (getVar 'id')~}}
{{setProp button 'style' 'collapse'~}}
{{~render '@button' button ~}}
</{{button-wrapper.html-tag}}>

{{~setProp this 'attributes' (evaluate attributes '||' (object))}}
<div class="collapse{{#if auto-expand}} show{{/if}}" id="{{getVar 'id'}}" {{{htmlAttr attributes}}}>
  <div class="{{classes}}">
    {{#if content}}{{{content}}}
    {{else if template}}{{{partial template.name template.data}}}
    {{else if body}}
      {{#each body}}
        {{#if paragraph}}{{> '@paragraphs--paragraph' paragraph}}{{/if}}
      {{/each}}
    {{/if}}
    {{#> body-partial}}{{/body-partial~}}
  </div>
</div>
