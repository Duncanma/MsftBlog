Multi Feature wraps [Accordion](https://mwf.azurewebsites.net/catalog/accordion/index.html) and allows content from the open [Collapse](https://mwf.azurewebsites.net/catalog/collapse/index.html) to be featured to the side within specified viewports.

## Responsiveness

Multi Feature appears as a standard, full container width Accordion at smaller screen sizes. By default, within the `xl` and `lg` viewports the Accordion spans 1/3 of the container width and the featured content from the open Collapse fills the remaining 2/3. These viewports are configurable by passing an array to the `customViewports` option. Viewports in the array are referenced by the MWF breakpoint class name extensions: `xs`, `sm`, `md`, `lg`, and `xl`. [Responsive width utilities](https://moray-prod.azurewebsites.net/components/detail/utilities-sizing--width.html) can be used with custom viewports to set complementary width styles; these would be required on the `.accordion` element and each `.multi-feature-feature`.

Within the custom viewports, the Accordion height is set to the height of the shortest content featured to the side or the height of the first Collapse while open plus enough to make part of the second Collapse trigger visible, whichever is larger. If the Accordion content is longer then the calculated height, a scrollbar will appear. The scrollbar styles are determined by browser and system defaults.

## Style

Multi Feature will always wrap an Accordion.

```html
<div data-mount="multi-feature" class="multi-feature"><!-- Accordion --></div>
```

| Property  | Value           | Description |
|-----------|-----------------|-------------|
| `class`   | `multi-feature` | Applies Multi Feature styling. |

Multi Feature requires content to be placed in two containers within the `.accordion-body`.

```html
<div class="accordion-body">
  <div class="multi-feature-body"><!-- Body content --></div>
  <div class="multi-feature-feature"><!-- Feature content --></div>
</div>
```

| Property  | Value                   | Description |
|-----------|-------------------------|-------------|
| `class`   | `multi-feature-body`    | Applies styling to the body content that always appears under the Collapse button. |
| `class`   | `multi-feature-feature` | Applies styling to the body content that is featured to the side. |

## Javascript usage

### Initialization

Adding `data-mount="multi-feature"` to the Multi Feature container will auto-initialize the Multi Feature on page load.

| Element       | Attribute    | Value             | Instance member | Required |  Description |
|---------------|--------------|-------------------|-----------------|----------|--------------|
| multi-feature | `data-mount` | `"multi-feature"` | `el`            | yes*     | Initialized Multi Feature. |

\* **Attribute is required if using the auto-initialization method only! `data-` attributes are not recommended to be used otherwise and may result in unexpected behavior.**

To initialize via JavaScript, create a new instance by passing in the reference to the Multi Feature container element using the `el` option.

```js
myMultiFeature = new mwf.MultiFeature({
  el: document.querySelector('.multi-feature')
});
```

### Options

| Name               | Type          | Required | Default        | Description |
|--------------------|---------------|----------|----------------|-------------|
| `el`               | `Node`        | yes      | `null`         | The Multi Feature element. |
| `accordionElement` | `Node`        | no       | `null`         | The Accordion element. Must have a `.accordion` if not including this option. See [Accordion wrapper documentation](https://mwf.azurewebsites.net/catalog/accordion/index.html#accordion-wrapper). |
| `collapses`        | `Array`       | no       | `[]`           | The list of Collapse instances. Collapses must be auto initialized following [Collapse implementation documentation](https://mwf.azurewebsites.net/catalog/collapse/index.html#tabpanel3) if not including this option. |
| `customViewports`  | `Array`       | no       | `['lg', 'xl']` | The list of viewports with custom accordion logic. |

### Events

| Event name  | Event target      | Description |
|-------------|-------------------|-------------|
| `onRemove`  | _instance_.`el`   | Dispatches when a multi feature is removed. |
| `onUpdate`  | _instance_.`el`   | Dispatches when a multi feature is updated. |

### Static Methods

#### getInstances()

Returns a list of all instances.

| Returns | Description                                             |
|---------|---------------------------------------------------------|
| `Array` | An array of all current instantiated Multi Feature instances. |

### Instance methods

#### inCustomViewport()

Check if current viewport is in custom viewport list.

| Returns   | Description                                             |
|-----------|---------------------------------------------------------|
| `Boolean` | Whether or not the current viewport is in custom viewport list. |

#### update()

Updates instance without removing it.

| Params                  | Type          | Required | Default        | Description |
|-------------------------|---------------|----------|----------------|-------------|
| `opts`                  | `Object`      | no       | `{}`           | An object containing configuration options. |
| `opts.accordionElement` | `Node`        | no       | `null`         | The Accordion element. |
| `opts.collapses`        | `Collapse[]`  | no       | `[]`           | The list of Collapse instances. |
| `opts.customViewports`  | `Array`       | no       | `['lg', 'xl']` | The list of viewports with custom accordion logic. |

#### remove()

Removes the event listeners and the instance.

### Instance properties

| Name               | Type      | Description            |
|--------------------|-----------|------------------------|
| `accordionElement` | `Node`    | The Accordion element. |
| `collapses`        | `Array`   | The list of Collapse instances. |
| `customViewports`  | `Array`   | The list of viewports with custom accordion logic. |
| `el`               | `Node`    | The Multi Feature element. |
| `events`           | `Array`   | An array of objects describing the event listeners and handlers added by this instance. |
| `open`             | `Object`  | The Collapse instance that is currently open. |
