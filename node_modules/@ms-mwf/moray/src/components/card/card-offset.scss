@import "../../styles/functions";
@import "../../variables";
@import "../../styles/mixins";
@import "mixins";

.card-offset {
  display: flex;

  @include media-breakpoint-up(md) {
    padding-top: map-get($spacers, 5); // Preserve offset space above
  }

  // Setup for both layouts
  .card-body {
    word-break: break-word;
    overflow-wrap: break-word;
    // Set base padding for body
    padding: map-get($spacers, 4);
    @include media-breakpoint-up(md) {
      padding: map-get($spacers, 5);
    }
  }
  .card-img {
    padding: 0; // Unset padding from column
    @include media-breakpoint-down(sm) {
      @include offset-padding-x(start, 4);
    }
    // Pull image above card
    @include media-breakpoint-up(md) {
      margin-top: (- map-get($spacers, 5));
      margin-bottom: (map-get($spacers, 5));
    }
  }

  // Spacing rules for non-flipped layout
  &:not(.flipped) {
    @include media-breakpoint-down(sm) {
      padding-bottom: (map-get($spacers, 4)); // Preserve offset space below
    }
    @include media-breakpoint-up(md) {
      @include offset-padding-x(end, 5); // Create offset space at end of card
      .card-body {
        @include offset-padding-x(end, 0); // Remove padding from end of body
      }
    }
    .card-img {
      @include media-breakpoint-down(sm) {
        margin-bottom: (- map-get($spacers, 4)); // Pull image below card
      }
      @include media-breakpoint-up(md) {
        @include offset-margin-x(end, 5); // Pull image outside end of card
      }
    }
  }

  // Spacing rules for flipped layout
  &.flipped {
    @include media-breakpoint-down(sm) {
      padding-top: (map-get($spacers, 4)); // Preserve offset space above
    }
    @include media-breakpoint-up(md) {
      @include offset-padding-x(start, 5); // Create offset space at start of card
      .card-body {
        @include offset-padding-x(start, 0); // Remove padding from start of body
      }
    }
    .card-img {
      @include media-breakpoint-down(sm) {
        margin-top: (- map-get($spacers, 4)); // Pull image above card
      }
      @include media-breakpoint-up(md) {
        @include offset-margin-x(start, 5); // Pull image outside start of card
      }
    }
  }

  // Reduced spacing rules for smaller variation
  &.card-offset-small {
    // Reduce body padding
    .card-body {
      padding-top: map-get($spacers, 3);
      padding-bottom: map-get($spacers, 3);
      @include media-breakpoint-up(md) {
        padding-top: map-get($spacers, 5);
        padding-bottom: map-get($spacers, 5);
      }
    }
    // Reduce above-card image pull
    .card-img {
      @include media-breakpoint-up(md) {
        margin-top: (- map-get($spacers, 4));
        margin-bottom: (map-get($spacers, 4));
      }
    }
    @include media-breakpoint-up(md) {
      padding-top: map-get($spacers, 4); // Reduce offset space above
      &:not(.flipped) {
        @include offset-padding-x(end, 4); // Reduce end-of-card offset space
        .card-img {
          @include offset-margin-x(end, 4); // Reduce end-of-card image pull
        }
      }
      &.flipped {
        @include offset-padding-x(start, 4); // Reduce start-of-card offset space
        .card-img {
          @include offset-margin-x(start, 4); // Reduce start-of-card image pull
        }
      }
    }
  }
}
