
{{~setVar 'buttonId' (evaluate button.id '||' (uid))~}}
{{~setVar 'menuId' (evaluate menu.id '||' (uid))~}}
{{~setVar 'menuHeaderId' (evaluate menu.header.id '||' (uid))~}}
{{#if menu}}
  {{#if button}}
    {{#with button}}
      {{> '@button' id=(getVar 'buttonId') attributes=(merge attributes (object aria-controls=(getVar 'menuId')))}}
    {{/with}}
  {{/if}}
  {{#if hotspot}}
    {{#with hotspot}}
      {{> '@hotspot' id=(getVar 'buttonId') attributes=(merge attributes (object aria-controls=(getVar 'menuId')))}}
    {{/with}}
  {{/if}}
  <div class="popover fade {{menu.classes}}" id="{{getVar 'menuId'}}" role="dialog" aria-labelledby="{{#if menu.header}}{{getVar 'menuHeaderId'}}{{else}}{{getVar 'buttonId'}}{{/if}}">
    {{> '@close' aria-label="Close dialog" title="Close"}}
    <div class="popover-content">
      {{#with menu.header}}
        {{> '@headings' classes="popover-header" id=(getVar 'menuHeaderId')}}
      {{/with}}
      <div class="popover-body">
        {{~#each menu.body}}
          {{render (strConcat '@' name) data merge=true}}
        {{/each~}}
      </div>
    </div>
  </div>
{{else}}
  {{#with button}}
    {{> '@button' id=(getVar 'buttonId')}}
  {{/with}}
{{/if}}

