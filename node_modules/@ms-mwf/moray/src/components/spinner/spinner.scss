@import "../../styles/functions";
@import "../../variables";
@import "../../styles/mixins";

.spinner {
  position: relative;
  width: $spinner-radius;
  height: $spinner-radius;
  padding: $spinner-radius * 0.15; // center spinner
}

.spinner .spinner-dot {
  position: absolute;
  transform: rotate(225deg);
  animation: orbit 5.5s infinite;
  width: $spinner-radius * 0.7; // divide by sqrt(2) because dot is on corner of square
  height: $spinner-radius * 0.7;
}

.spinner .spinner-dot::after {
  content: "";
  position: absolute;
  border-radius: 100%;
  width: $spinner-dot-height-width;
  height: $spinner-dot-height-width;
  border: $spinner-color $spinner-dot-height-width / 2 solid; // For High Contrast Mode
  background: $spinner-color;

  @include theme-inverse {
    background: $spinner-color-inverse;
  }
}

.spinner .spinner-dot.spinner-dot-2 {
  animation-delay: 240ms;
}

.spinner .spinner-dot.spinner-dot-3 {
  animation-delay: 480ms;
}

.spinner .spinner-dot.spinner-dot-4 {
  animation-delay: 720ms;
}

.spinner .spinner-dot.spinner-dot-5 {
  animation-delay: 960ms;
}

// Large Spinner styles
.spinner.spinner-lg {
  width: $spinner-radius-lg;
  height: $spinner-radius-lg;
  padding: $spinner-radius-lg * 0.15; // center spinner
}

.spinner.spinner-lg .spinner-dot {
  width: $spinner-radius-lg * 0.71; // divide by sqrt(2) because dot is on corner of square
  height: $spinner-radius-lg * 0.71;
}

.spinner.spinner-lg .spinner-dot::after {
  width: $spinner-dot-height-width-lg;
  height: $spinner-dot-height-width-lg;
  border-width: $spinner-dot-height-width-lg / 2;
}

// alternate styles for users who indicate preference for reduced motion on their browser
// or who have devices that can't display smooth animation
@media screen and (prefers-reduced-motion: reduce),
  (update: slow) {
  .spinner-dot,
  .spinner-dot::after { // hide dots
    display: none;
  }
  .spinner > .sr-only { // show textual loading message
    position: static;
    width: auto;
    height: auto;
    clip: auto;
    white-space: inherit;
  }
}

// Animation definition
@keyframes orbit {
  0% {
    transform: rotate(225deg);
    opacity: 1;
    animation-timing-function: ease-out;
  }

  7% {
    transform: rotate(345deg);
    animation-timing-function: linear;
  }

  30% {
    transform: rotate(455deg);
    animation-timing-function: ease-in-out;
  }

  39% {
    transform: rotate(690deg);
    animation-timing-function: linear;
  }

  70% {
    transform: rotate(815deg);
    opacity: 1;
    animation-timing-function: ease-out;
  }

  75% {
    transform: rotate(945deg);
    animation-timing-function: ease-out;
  }

  76% {
    transform: rotate(945deg);
    opacity: 0;
  }

  100% {
    transform: rotate(945deg);
    opacity: 0;
  }
}
