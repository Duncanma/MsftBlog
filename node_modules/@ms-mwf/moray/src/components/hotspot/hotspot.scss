@import "../../styles/functions";
@import "../../variables";
@import "../../styles/mixins";
@import "mixins";

.hotspot {
  // make it circular
  border-radius: 50%;
  width: $hotspot-medium-diameter-default;
  height: $hotspot-medium-diameter-default;

  padding: 0;
  transform: translate(-50%, -50%); // lets it be positioned based on its center instead of top-left
  position: absolute;
  top: 50%; // default value, expected to be overwritten
  left: 50%; // default value, expected to be overwritten
  // center any text
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  vertical-align: middle;
  box-shadow: $depth-4;

  // optional multi-border style, make sure VFI is visible
  border: 0 solid $body-bg-inverse;
  outline-color: $body-bg-inverse;
  outline-offset: $vfi-outline-width; // make room for special double-color pseudo-outline

  &::before {
    // create an inner border
    content: "";
    display: block;
    position: absolute;
    border-radius: 50%;
    width: 104%; // overflow slightly to guard against fractional pixel artifacts
    height: 104%;
    border: 4px solid $body-bg;
    top: -2%;
    left: -2%;

    z-index: -1; // makes inner border stack under outline (VFI)
  }

  // create ripple animation on hover
  @include define-ripple-animation($light, 1em);
  @include ripple-border($light, 1em);

  // bigger at wider viewports
  @include media-breakpoint-up(md) {
    width: $hotspot-medium-diameter-md-up;
    height: $hotspot-medium-diameter-md-up;
  }

  // Image as button content
  .hotspot-img {
    border-radius: 50%;
    border: 4px solid transparent;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  // Modifier classes for variants

  // Misc
  &.hotspot-extra-border:not(:focus) {
    border: 1px solid;

    &::before {
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
    }

    &:hover {
      border: none;
    }
  }

  &.hotspot-large-glyph {
    .glyph-append,
    .glyph-prepend {
      font-size: $hotspot-large-diameter-md-up / 2;
    }
  }

  // Standard Colors
  &.hotspot-light {
    @include hotspot-colors($light);
  }

  &.hotspot-primary {
    @include hotspot-colors($primary);
  }

  &.hotspot-primary-alt {
    @include hotspot-colors($primary-alt);
  }

  &.hotspot-dark {
    @include hotspot-colors($dark);
  }

  // Minimalist Colors and Variants
  &.hotspot-minimalist-light {
    @include hotspot-minimalist-colors($light);
  }

  &.hotspot-minimalist-primary {
    @include hotspot-minimalist-colors($primary);
  }

  &.hotspot-minimalist-primary-alt {
    @include hotspot-minimalist-colors($primary-alt);
  }

  &.hotspot-minimalist-dark {
    @include hotspot-minimalist-colors($dark);
  }

  // Sizes
  &.hotspot-sm {
    height: $hotspot-small-diameter-default;
    width: $hotspot-small-diameter-default;

    @include media-breakpoint-down(sm) {
      line-height: 1;
    }

    @include media-breakpoint-up(md) {
      width: $hotspot-small-diameter-md-up;
      height: $hotspot-small-diameter-md-up;
    }

    &::before {
      border-width: 3px; // leave room for 16px font-size
    }
  }

  &.hotspot-lg {
    height: $hotspot-large-diameter-default;
    width: $hotspot-large-diameter-default;

    @include media-breakpoint-up(md) {
      width: $hotspot-large-diameter-md-up;
      height: $hotspot-large-diameter-md-up;
    }
  }

  // glyph alignment fix
  .glyph-prepend,
  .glyph-append {
    line-height: 1;
    height: 1em;
    font-size: 1em;
  }

  //  circular inset VFI
  &:focus {
    outline: none;
    // outlines follow the border radius of an element on newer chromium and firefox, but not safari
    // there's no reliable way to detect the behavior, so most consistent option is to use pseudoelement
    // for VFI instead

    &::after {
      border-style: dashed; // dashed has fewer issues with zoom and fractional pixels
      border-width: $vfi-outline-width;
      border-color: color-yiq($body-bg);
      content: "";
      display: block;
      position: absolute;
      box-sizing: border-box;
      border-radius: 50%;
      width: 102%;
      height: 102%;
      top: -1%; // Necessary for Safari
      left: -1%;
    }

    &:hover::after {
      box-sizing: border-box;
    }
  }
}
