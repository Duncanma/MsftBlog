@import "../../styles/functions";
@import "../../variables";
@import "../../styles/mixins";

// Base class
//
// Kickstart any navigation component with a set of style resets. Works with
// `<nav>`s or `<ul>`s.

.nav-container {
  overflow-x: hidden; // keeps nav from overflowing page
  padding: $nav-container-padding; // makes room for VFI

  .nav {
    // Nav items wrap like inline-blocks, this allows appearance of no margin at edges of nav
    margin-left: -$nav-link-margin-x;
    margin-right: -$nav-link-margin-x;
  }
}

.nav {
  display: flex;
  flex-wrap: wrap;
  padding: 0;
  margin-bottom: 0;
  list-style: none;

  .nav-item {
    margin: 0 $nav-link-margin-x;
  }
}

.nav-link,
.nav-item {
  position: relative;

  &::before {
    content: "";
    display: none; // Construct underline but don't show
    position: absolute;
    bottom: fry-position($nav-link-padding-y, $nav-link-line-height);
    left: 0;
    width: 100%;
    height: $nav-link-fry-height;
    padding: 0 $nav-link-padding-x;
    background-color: $primary;
    background-clip: content-box;
  }
}

.nav-link {
  display: inline-block;
  padding: $nav-link-padding-y $nav-link-padding-x;
  color: $nav-link-color;
  font-weight: $nav-link-font-weight;
  text-decoration: none;

  &:hover {
    &::before {
      // Show underline
      display: block;
    }
  }

  // Disabled state lightens text
  &.disabled {
    color: $nav-link-disabled-color;
    pointer-events: none;
    cursor: default;
  }

  &.active {
    color: $nav-link-active-color;
    &::before {
      display: none;
    }
  }

  // Dropdowns

  &.dropdown-toggle {
    @include ltr {
      padding-right: $nav-dropdown-caret-font-size + $nav-bar-dropdown-caret-spacing;
      // if $nav-link-padding-x actually has a value, use something like the following:
      // padding-right: calc(#{$nav-link-padding-x} + #{$nav-dropdown-caret-font-size + $nav-bar-dropdown-caret-spacing});
    }
    @include rtl {
      padding-left: $nav-dropdown-caret-font-size + $nav-bar-dropdown-caret-spacing;
    }

    &::before {
      width: calc(100% - #{$nav-dropdown-caret-font-size + $nav-bar-dropdown-caret-spacing});
    }

    &::after {
      @include ltr {
        right: $nav-link-padding-x;
      }
      @include rtl {
        left: $nav-link-padding-x;
      }
    }
  }

  // Add space after glyph
  .glyph-prepend {
    display: flex;
    align-items: center;

    &::before {
      @include ltr {
        padding-right: $nav-glyph-padding-x;
      }
      @include rtl {
        padding-left: $nav-glyph-padding-x;
      }
    }
  }
}

.nav-item {
  &.active {
    color: $nav-link-active-color;

    .nav-link {
      color: $nav-link-active-color;
    }

    &::before {
      // Show underline
      display: block;
    }
  }
}

// Justified variants

.nav-fill {
  .nav-item {
    flex: 1 1 auto;
    text-align: center;
  }
}

.nav-justified {
  .nav-item {
    flex-basis: 0;
    flex-grow: 1;
    text-align: center;
  }
}

.nav-fill,
.nav-justified {
  margin: 0;

  .nav-item {
    margin: 0;
  }

  .nav-link {
    width: 100%;
  }
}
