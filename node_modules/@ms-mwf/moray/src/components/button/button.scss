@import "../../styles/functions";
@import "../../variables";
@import "../../styles/mixins";
@import "mixins";

// stylelint-disable selector-no-qualifying-type

//
// Base styles
//

.btn {
  display: inline-block;
  font-weight: $btn-font-weight;
  border: $btn-border-width solid transparent;
  position: relative;
  border-radius: $btn-border-radius;
  background-color: inherit;
  color: inherit;
  text-decoration: none;
  @include button-size($btn-padding-y, $btn-padding-x, $font-size-base, $btn-line-height);
  // Opinionated: add "hand" cursor to non-disabled .btn elements
  cursor: pointer;

  // Button states

  &:disabled,
  &.disabled {
    cursor: default;
    opacity: $btn-disabled-opacity;
  }

  &:focus {
    @include vfi-text-color-inset;
  }

  // Glyph styles

  &.glyph-prepend {
    @include ltr {
      padding-left: $btn-glyph-padding-x;
    }
    @include rtl {
      padding-right: $btn-glyph-padding-x;
    }
  }

  &.glyph-append {
    @include ltr {
      padding-right: $btn-glyph-padding-x;
    }
    @include rtl {
      padding-left: $btn-glyph-padding-x;
    }
  }

  &::before,
  &::after {
    font-family: $font-family-glyph;
    position: absolute;
    top: 50%;
    margin-top: -0.5em;
  }

  &::before {
    @include ltr {
      left: $btn-glyph-position-x;
    }
    @include rtl {
      right: $btn-glyph-position-x;
    }
  }

  &::after {
    @include ltr {
      right: $btn-glyph-position-x;
    }
    @include rtl {
      left: $btn-glyph-position-x;
    }
  }
}

// Future-proof disabling of clicks on `<a>` elements
a.btn.disabled,
fieldset:disabled a.btn {
  pointer-events: none;
}

//
// Alternate colors and variants
//


// Generate all possible placeholders for extension

@each $name, $hex in $grays {
  // standard
  %btn-gray-#{$name} {
    @include button-variant($hex);
  }
  // inverted
  %btn-inverted-gray-#{$name} {
    @include button-variant($hex, true);
  }
  // outline
  %btn-outline-gray-#{$name} {
    @include button-outline-variant($hex);
  }
  // faint
  %btn-faint-gray-#{$name} {
    @include button-faint-variant($hex);
  }
}

@each $name, $hex in $mwf-colors {
  // standard
  %btn-#{$name} {
    @include button-variant($hex);
  }
  // inverted
  %btn-inverted-#{$name} {
    @include button-inverted-variant($hex);
  }
  // outline
  %btn-outline-#{$name} {
    @include button-outline-variant($hex);
  }
  // faint
  %btn-faint-#{$name} {
    @include button-faint-variant($hex);
  }
}

@each $name, $hex in $mwf-theme-colors {
  // standard
  .btn-#{$name} {
    // If it's a "light" or "dark" shade of a theme color, ex. "brand-dark"
    // pick the opposite shade of the same theme color if it exists, ex. "brand-light"
    $text-color: theme-color-opposite($name);
    @if ($text-color) {
      @include button-variant($hex, $text-color);
    } @else {
      // Otherwise create a standard button using default yiq color
      @include extend-themed-variant($name, $hex, "btn");
    }
  }
  // inverted
  .btn-inverted-#{$name} {
    @include extend-themed-variant($name, $hex, "btn-inverted");
  }
  // outline
  .btn-outline-#{$name} {
    @include extend-themed-variant($name, $hex, "btn-outline");
  }
  // faint
  .btn-faint-#{$name} {
    @include extend-themed-variant($name, $hex, "btn-faint");
  }
}

//
// Link buttons
//

// Make a button look and behave like a link
.btn-link {
  background: transparent;
  border-radius: 0;
  color: $link-color;
  text-decoration: $link-decoration;

  @include theme-inverse {
    color: $link-color-inverse;
  }

  &.inactive {
    opacity: 1;
    text-decoration: none;
    color: $neutral-300;
    cursor: default;
  }
}

//
// Button Sizes
//

.btn-lg {
  @include button-size($btn-padding-y-lg, $btn-padding-x-lg, $font-size-lg, $btn-line-height-lg);
}

.btn-sm {
  @include button-size($btn-padding-y-sm, $btn-padding-x-sm, $font-size-sm, $btn-line-height-sm);
}


//
// Block button
//

.btn-block {
  display: block;
  width: 100%;
  text-align: center;

  // Vertically space out multiple block buttons
  + .btn-block {
    margin-top: $btn-block-spacing-y;
  }
}
