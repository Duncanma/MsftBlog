The Range component is a stylized version of the default browser `<input type="range">` element, with additional JavaScript functionality for improved accessibility. In order to align with the markup for the [Select component](https://mwf.azurewebsites.net/catalog/select/index.html), **the markup for the Range component differs from the original Bootstrap 4 [Custom range](https://getbootstrap.com/docs/4.6/components/forms/#range).**

## Style

The Range component is a `<div>` with the class `custom-range`.

```html
<div class="custom-range">
  ...
</div>
```

The `<input type="range">` element is an immediate child of the `custom-range` `<div>`. It requires the class `custom-range-input`. It is recommended to also provide the `min`, `max`, and `step` attributes on the element. See the [MDN documentation on `<input type="range">`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/range) for more information.

```html
<div class="custom-range">
  <input type="range" class="custom-range-input" min="0" max="10" step="1">
</div>
```

### Track labels

Optional track labels can be added under the Range component's track to improve usability. The track labels are `<span>` elements contained in a `<div>` with the class `custom-range-track-labels` and must also have the attribute `aria-hidden="true"` to hide them from screen readers. By default, the labels are spaced evenly beneath the Range track using flexbox.

```html
<div class="custom-range">
  <input type="range" class="custom-range-input">
  <div class="custom-range-track-labels" aria-hidden="true">
    <span>0</span>
    <span>10</span>
  </div>
</div>
```

## Behavior

### Label

An accompanying label is recommended but not required so long as a label is provided by some other means for assistive technology (i.e., an `aria-label` attribute on the `<input>` element). If a `<label>` is used, it must be placed outside the `custom-range` element.

```html
<label for="quantity">Quantity</label>
<div class="custom-range">
  <input type="range" class="custom-range-input" id="quantity">
</div>
```

## JavaScript usage

### Initialization

Adding `data-mount="range"` to the `<input>` element will auto-initialize enhanced functionality and accessibility features of the component. Options can be set using additional data attributes on the HTML. If more control and customization is needed, it may be necessary to initialize your component manually by directly calling the JavaScript constructor.

| Element | Attribute        | Value     | Instance member | Required | Description                     |
|---------|------------------|-----------|-----------------|----------|---------------------------------|
| input   | `data-mount`     | `"range"` | `el`            | yes*     | Initializes the enhanced functionality of the range element   |
| input   | `data-valuetext` | string    | `el`            | no       | Template for the `aria-valuetext` for all values except for min and max; `%{value}` will be replaced by the current numeric value |
| input   | `data-mintext`   | string    | `el`            | no       | Template for the `aria-valuetext` for the minimum value; `%{value}` will be replaced by the current numeric value |
| input   | `data-maxtext`   | string    | `el`            | no       | Template for the `aria-valuetext` for the maximum value; `%{value}` will be replaced by the current numeric value |

\* **Attribute is required if using the auto-initialization method only. `data-` attributes are not recommended for use otherwise and may result in unexpected behavior.**

To initialize Range directly, create a new instance by passing in the reference of the `<input>` element using the `el` option.

```js
rangeInstance = new mwf.Range({
  el: document.querySelector('#rangeId')
});
```

| Property             | Type          | Required | Default  | Description                          |
|----------------------|---------------|----------|----------|--------------------------------------|
| `el`                 | `HTMLElement` | yes      | `null`   | The range input element              |
| `onInput`            | `Function`    | no       | `null`   | Function to override the range input handler |
| `getValuetext`       | `Function`    | no       | `null`   | Function that returns the `aria-valuetext` for a particular range value |
| `valueTextTemplates` | `Object`      | no       | `null`   | Object containing string templates for `maxtext`, `mintext`, and `valuetext` |
| `tooltip`            | `Object`      | no       | `null`   | Object containing references to two Nodes: the tooltip `wrapper` and `span` (text container) |

### Events

| Name        | Target          | Description                                                       |
|-------------|-----------------|-------------------------------------------------------------------|
| `onChange`  | _instance_.`el` | Dispatches when the value of the instance's input element changes and receives the new value in the event's `details` object |
| `onRemove`  | _instance_.`el` | Dispatches when instance is removed                               |
| `onUpdate`  | _instance_.`el` | Dispatches when instance is updated                               |

### Static methods

#### getInstances()

Returns a list of all range instances.

| Returns | Description                                 |
|---------|---------------------------------------------|
| `Array` | An array of all current instantiated ranges |

### Instance methods

#### update()

Updates instance without removing it. Optionally changes `onInput` and `getValuetext` functions as well as `valueTextTemplates` and `tooltip` objects.

| Name                      | Type       | Required | Default | Description |
|---------------------------|------------|----------|---------|-------------|
| `opts`                    | `Object`   | no       | `{}`    | An object containing configuration options. |
| `opts.onInput`            | `Function` | no       | null    | Function to override the range input handler |
| `opts.getValuetext`       | `Function` | no       | null    | Function that returns the `aria-valuetext` for a particular range value |
| `opts.valueTextTemplates` | `Object`   | no       | null    | Object containing string templates for `maxtext`, `mintext`, and `valuetext` |
| `opts.tooltip`            | `Object`   | no       | null    | Object containing references to two Nodes: the tooltip `wrapper` and `span` (text container); the tooltip can be removed by passing a value of `null` |

The option(s) need to be passed in as a config object like so:  

```js
rangeInstance.update({
  onInput: myOnInputFunc,
  getValuetext: myGetValuetextFunc,
  valueTextTemplates: myValueTextTemplates,
  tooltip: myTooltip
});
```

#### remove()

Removes all event listeners, observers, and references to the range instance.

### Instance properties

| Name                 | Type          | Description |
|----------------------|---------------|-------------|
| `el`                 | `HTMLElement` | The range input element |
| `min`                | `Number`      | The value of the range input's `min` attribute |
| `max`                | `Number`      | The value of the range input's `max` attribute |
| `onInput`            | `Function`    | Function that handles the range input's input and change events |
| `getValuetext`       | `Function`    | Function that returns the appropriate `aria-valuetext` for a given `value` |
| `valueTextTemplates` | `Object`      | Object containing string templates for `maxtext`, `mintext`, and `valuetext` |
| `tooltip`            | `Object`      | Object containing references to two Nodes: the tooltip `wrapper` and `span` (text container) |
| `tooltipEvents`      | `Object`      | Object containing tooltip event handlers |
| `valueTextEvents`    | `Object`      | Object containing `aria-valuetext` event handlers |
| `value`              | `Number`      | The value of the range input |
| `onChange`           | `CustomEvent` | The custom event that is fired when the value of the instance's input element changes |
| `onUpdate`           | `CustomEvent` | The custom event that is fired when the instance is updated via the `.update()` instance method |
| `onRemove`           | `CustomEvent` | The custom event that is fired when the instance is removed via the `.remove()` instance method |
