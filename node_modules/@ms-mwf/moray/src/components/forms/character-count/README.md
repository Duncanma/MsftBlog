This component is used in conjunction with a form field that has a maximum character count in order to give guidance as the user types. It shows visually and narrates to screen readers how many characters remain before hitting the maximum.

```html
<!-- Form Elements -->
<label for="unique-form-id">Write something here</label>
<input class="form-control" type="text" id="unique-form-id" maxlength="30" />

<!-- Status Message Wrapper -->
<div
  data-mount="character-count"
  data-target="#unique-form-id"
  data-status-msg-template="%{remaining} of %{max} characters remaining"
  data-max-msg-template="Maximum character count reached"
  data-sr-low-char-warning-lvl="5"
>
  <!-- Visual Status Message -->
  <span class="text-muted" aria-hidden="true"></span>
  <!-- Screen Reader Status Message -->
  <span class="sr-only" role="status" aria-live="polite" aria-atomic="true"></span>
</div>
```

## The Form Elements

```html
<label for="unique-form-id">Write something here</label>
<input class="form-control  " type="text" id="unique-form-id" maxlength="30" />
```

This component was developed with text `<input>` and `<textarea>` elements in mind. Detailed documentation can be found on the [Forms]({{ internalLink '/components/detail/text-field--input' }}) page. However, two properties are required in order to work properly with the Character Count component:

### Required Properties

| Property  | Value                | Description                                            |
| --------- | -------------------- | ------------------------------------------------------ |
| id        | (a unique id)        | Allows the Character Count instance to target the form |
| maxlength | (a positive integer) | Defines the maxmimum allowed characters                |

## Status Message Wrapper

```html
<div
  data-mount="character-count"
  data-target="#unique-form-id"
  data-status-msg-template="%{remaining} of %{max} characters remaining"
  data-max-msg-template="Maximum character count reached"
  data-sr-low-char-warning-lvl="5"
>
  ...
</div>
```

This element stores all the configuration information for the instance.

### Required Properties

| Property                     | Value                           | Description                                                  |
| ---------------------------- | ------------------------------- | ------------------------------------------------------------ |
| data-mount                   | `character-count`               | Enables auto-initialization for JavaScript                   |
| data-target                  | an #id CSS selector             | Defines target form element to monitor                       |
| data-status-msg-template     | (a message template, see below) | Template for status message before max is reached            |
| data-max-msg-template        | (a message template, see below) | Template for status message after max is reached             |
| data-sr-low-char-warning-lvl | (a positive integer)            | Narrates status immediately when this many characters remain |

#### Message Template

The message templates for Character Count can include the following two template variables: `%{max}` and `%{remaining}`, which are replaced with the max allowed characters and the remaining amount of characters, respectively. These template are intended to be authorable by site authors and must be localized.

## Visual Status Message

```html
<span class="text-muted" aria-hidden="true"></span>
```

This first span is the visually displayed status message, which is updated immediately on every change in the form's value.

### Required Properties

| Property    | Value        | Description                                                              |
| ----------- | ------------ | ------------------------------------------------------------------------ |
| class       | `text-muted` | Adds appropriate muted color to text                                     |
| aria-hidden | `true`       | Hides the visual message from screen readers because it updates too fast |

## Screen Reader Status Message

```html
<span class="sr-only" role="status" aria-live="polite" aria-atomic="true"></span>
```

The second span is what the screen reader narrates. It has a debounced update, so it only narrates when the user pauses typing, with two exceptions. First, when a low characters remaining level is reached, it narrates the status immediately as a warning. Second, when the max characters are reached, it narrates immediately when any printable character is keyed.

### Required Properties

| Property    | Value     | Description                                       |
| ----------- | --------- | ------------------------------------------------- |
| class       | `sr-only` | Hides message visually                            |
| role        | `status`  | Indicates proper narration style to screen reader |
| aria-live   | `polite`  | Indicates proper narration style to screen reader |
| aria-atomic | `true`    | Indicates proper narration style to screen reader |

## JavaScript Usage

Adding `data-mount="character-count"` to the triggering button will auto-initialize the CharacterCount on page load. It will monitor the element matching the selector in the `data-target` attribute and update the status message accordingly.

### Initialization

To initialize a CharacterCount via JavaScript, create a new instance by passing in the toggling element using the `el` option. For example:

```js
myCharacterCount = new mwf.CharacterCount({
  el: document.querySelector('#character-countId')
});
```

### Options

| Name | Type | Required | Default | Description                               |
| ---- | ---- | -------- | ------- | ----------------------------------------- |
| el   | Node | yes      | null    | The element that wraps the status message |

### Events

| Event name | Event target           | Description                                 |
| ---------- | ---------------------- | ------------------------------------------- |
| onRemove   | instance.statusMessage | Dispatches when a CharacterCount is removed |
| onUpdate   | instance.statusMessage | Dispatches when a CharacterCount is updated |

### Static Methods

#### getInstances()

Returns a list of all dropdown instances.

| Returns | Description                                          |
| ------- | ---------------------------------------------------- |
| array   | An array of all current instantiated CharacterCounts |

### Instance Methods

#### updateStatusMessage()

Updates the status message to reflect current character count.

#### getUserInputLength()

Returns the length of the current value of the monitored form element.

#### isMaxInputReached()

Returns a boolean of whether the max length has been reached.

#### isInputAtOrBelowLowCharWarnLvl()

Returns a boolean of whether the characters remaining is at or below the designated low character warning level

#### remove()

Removes all event listeners, observers, and references to the CharacterCount instance

#### update()

Updates the CharacterCount by re-initializing and updating the TargetList
