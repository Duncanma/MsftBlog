<section>
  {{~setVar 'count' (evaluate count '||' cards.length)~}}
  {{~setProp this 'grid' (evaluate grid '||' (object))~}}
  {{~#ifCond count '===' 1~}}
    {{~setProp ../grid 'row-cols' (array '1')~}}
  {{~/ifCond~}}
  {{~#ifCond count '===' 2~}}
    {{~setProp ../grid 'row-cols' (array '1' 'md-2')~}}
  {{~/ifCond~}}
  {{~#ifCond count '===' 3~}}
    {{~setProp ../grid 'row-cols' (array '1' 'md-3')~}}
  {{~/ifCond~}}
  {{~#ifCond count '>=' 4~}}
    {{~setProp ../grid 'row-cols' (array '1' 'sm-2' 'lg-4')~}}
  {{~/ifCond~}}
  {{~#> '@card-layout--grid' this~}}
    {{~#*inline 'cards'~}}
      {{~#each cards~}}
        {{~#ifCond ../count '===' 2~}}
          {{~#unless @last~}}
            {{~setProp ../this 'col-classes' 'mb-5 mb-md-0'~}}
          {{~/unless~}}
        {{~/ifCond~}}
        {{~#ifCond ../count '===' 3~}}
          {{~#unless @last~}}
            {{~setProp ../this 'col-classes' 'mb-5 mb-md-0'~}}
          {{~/unless~}}
        {{~/ifCond~}}
        {{~#ifCond ../count '===' 4~}}
          {{~#ifCond @index '<' 2~}}
            {{~setProp ../../this 'col-classes' 'mb-5 mb-lg-0'~}}
          {{~else~}}
            {{~#unless @last~}}
              {{~setProp ../../this 'col-classes' 'mb-5 mb-sm-0'~}}
            {{~/unless~}}
          {{~/ifCond~}}
        {{~/ifCond~}}

        <div class="col {{col-classes}}">
          {{> '@content-cards-vertical--card' this}}
        </div>
      {{/each}}
    {{/inline}}
  {{/'@card-layout--grid'}}
</section>

{{#each cards}}
  {{#if video}}
    {{#> @modal id=video.modal.id button=false body=false footer=false}}
      {{#*inline "body-partial"}}
        Embed third-party video player here.
      {{/inline}}
    {{/@modal}}
  {{/if}}
{{/each}}
