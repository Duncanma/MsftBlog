{{!-- Define variables --}}
{{~setVar 'cardClasses' (array)~}}
{{~setVar 'headerClasses' (array 'pt-3')~}}
{{~setVar 'bodyClasses' (array)~}}
{{~setVar 'footerClasses' (array 'pt-3')~}}

{{!-- Define styles for depth and icon variants --}}
{{#if depth}}
  {{push (getVar 'cardClasses') 'material-card h-100'}}
  {{push (getVar 'headerClasses') 'px-4'~}}
  {{push (getVar 'bodyClasses') 'px-4'~}}
  {{push (getVar 'footerClasses') 'px-4 pb-4'~}}
  {{#if carousel}}
    {{push (getVar 'headerClasses') 'px-lg-5'~}}
    {{push (getVar 'bodyClasses') 'px-lg-5'~}}
    {{push (getVar 'footerClasses') 'px-lg-5'~}}
  {{/if}}
{{else if icon}}
  {{~setVar 'bodyClasses' (array 'pt-g')~}}
  {{~setProp image 'custom-classes' true~}}
{{/if}}

{{!-- Define color scheme --}}
{{#if color-scheme}}
  {{push (getVar 'cardClasses') (strConcat 'material-color-' color-scheme)}}
{{/if}}

{{!-- Update classes for cards without headers --}}
{{#unless header}}
  {{#if depth}}
    {{push (getVar 'bodyClasses') 'pt-4'~}}
  {{else}}
    {{push (getVar 'bodyClasses') 'pt-3'~}}
  {{/if}}
{{/unless}}

{{!-- Assign props --}}
{{~setProp this 'attributes' (evaluate attributes '||' (object))~}}
{{~setProp attributes 'data-mount' 'click-group'~}}
{{~#if video~}}
  {{~setProp attributes 'data-target' video.target~}}
  {{~setProp video.icon 'small' true~}}
{{~/if~}}
{{~setProp this 'classes' (join (getVar 'cardClasses') ' ')~}}
{{~setProp body 'classes' (join (getVar 'bodyClasses') ' ')~}}
{{#if header}}
  {{~setProp header 'classes' (join (getVar 'headerClasses') ' ')~}}
{{/if}}
{{#if footer}}
  {{~setProp footer 'classes' (join (getVar 'footerClasses') ' ')~}}
{{/if}}

{{!-- Card template --}}
{{#> '@card' this}}
  {{#* inline 'image'}}
    {{#if ../video}}
      <div class="position-relative img-flex-auto">
        {{render '@images--full-width-picture-element' ../image}}
        {{render '@play-video' ../video.icon}}
      </div>
    {{else}}
      {{render '@images--full-width-picture-element' ../image}}
    {{/if}}
  {{/inline}}
{{/'@card'}}
