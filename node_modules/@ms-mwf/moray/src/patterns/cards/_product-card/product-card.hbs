  {{!-- Define variables --}}
{{~setVar 'cardClasses' (array 'h-100')~}}

{{!-- Define card material color --}}
{{#if material-background}}
  {{~push (getVar 'cardClasses') material-background~}}
{{else}}
  {{~push (getVar 'cardClasses') 'material-card'~}}
{{/if}}

{{!-- Define static card depth --}}
{{#if static-depth}}
  {{~push (getVar 'cardClasses') 'depth-4'~}}
{{else}}
  {{~push (getVar 'cardClasses') 'depth-none'~}}
{{/if}}

{{!-- Define hover interactivitiy --}}
{{~setProp this 'attributes' (evaluate attributes '||' (object))~}}
{{~setProp attributes 'data-mount' 'click-group'~}}
{{~push (getVar 'cardClasses') 'depth-8-hover'~}}

{{#if hover-image}}
  {{~push (getVar 'cardClasses') 'card-alt-hover'~}}
{{/if}}

{{!-- Define card margin and padding styles --}}
{{#if custom-padding}}
  {{~push (getVar 'cardClasses') custom-padding~}}
{{else}}
  {{~push (getVar 'cardClasses') 'pb-4'~}}
{{/if}}

{{!-- Define body styles --}}
{{#if header}}
  {{setProp header 'classes' 'pt-3 px-3'}}
  {{setProp body 'classes' 'px-3'}}
{{else}}
  {{setProp body 'classes' 'pt-3 px-3'}}
{{/if}}

{{!-- Assign props --}}
{{~setProp this 'classes' (join (getVar 'cardClasses') ' ')~}}

{{!-- Card template --}}
<{{card-html-tag}} class="col {{column-classes}}">
  {{#> '@card' this}}
    {{#* inline 'image'}}
      <div class="img-flex-auto">
        {{render '@images--full-width-picture-element' ../image merge=true}}
        {{~#if ../hover-image~}}
          {{render '@images--full-width-picture-element' ../hover-image merge=true}}
        {{~/if~}}
      </div>
    {{/inline}}

    {{#* inline 'header'}}
      {{#with ../header}}
        {{#if badge}}
          {{ render '@badge' badge }}
        {{/if}}
        {{#if secondary-badge}}
          {{ render '@badge' secondary-badge }}
        {{/if}}
      {{/with}}
    {{/inline}}

    {{#* inline 'body'}}
      {{#with ../body}}
        <h4 {{#if headline.classes}}class="{{headline.classes}}"{{else}}class="base mb-2"{{/if}}>
          <a href="{{headline.href}}" aria-label="{{headline.text}}">{{{truncate headline.text 60 '...'}}}</a>
        </h4>

        {{#if sale-price}}
          {{ render '@sale-price' sale-price }}
        {{/if}}

        {{#if text}}
          <p>{{{truncate text 90 '...'}}} <span class="sr-only">Select {{headline.text}} for more information</span></p>
        {{/if}}
      {{/with}}
    {{/inline}}
  {{/'@card'}}
</{{card-html-tag}}>
